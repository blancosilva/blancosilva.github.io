<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width initial-scale=1">
	<meta name="description" content="Useless math is useful math. It can be used to generate more useless math.
">
	<meta name="author" content="">

	<title>Interaction with Sage</title>

	<!-- Bootstrap core CSS -->
	<link href="/css/bootstrap.css" rel="stylesheet">
	<!-- Bootstrap theme -->
	<link href="/css/bootstrap-theme.css" rel="stylesheet">

	<!-- Custom styles for this template -->
	<link href="/css/blog.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/pygments.css">
</head>

<body role="document">

	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<a class="navbar-brand" href="#">
				<img alt="Brand" src="https://farm6.staticflickr.com/5131/5393012839_cf3ccae561_o_d.png" style="width:25px;">
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
			</button>
			<a class="navbar-brand" href="/">Francisco Blanco-Silva</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				
				
				<li><a class="page-link" href="/about/">About me</a></li>
				
				
				
				<li><a class="page-link" href="/books/">Books</a></li>
				
				
				
				
				
				
				
				
				
				
				
				<li><a class="page-link" href="/presentations.html">Presentations</a></li>
				
				
				
				
				
				
			</ul> <!-- nav navbar-nav -->
			<ul class="nav navbar-nav navbar-right">
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">Teaching <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li class="dropdown-header">Current | Most recent classes</li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2014/08/19/ma141-fall-2014.html">MA141—Fall 2014</a></li>
						
						
						
						<li><a href="/course/2014/08/18/math-122-fall-2014.html">MA122—Fall 2014</a></li>
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2014/01/11/ma-241-spring-2014.html">MA241—Spring 2014</a></li>
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2013/08/22/ma242-fall-2013.html">MA242—Fall 2013</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2012/06/26/ma142-summer-ii-2012.html">MA142—Summer II 2012</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li class="divider"></li>
						<li class="dropdown-header">Review Exams</li>
						
						
						<li><a href="/forum/2014/12/02/MA144Fa14RT2.html">MATH 141 Fall 2014 Review Exam (2|5)</a></li>
						
						
						
						<li><a href="/forum/2014/12/02/MA122Fa14RT1.html">MATH 122 Fall 2014 Review Exam (1|4)</a></li>
						
						
						
						<li><a href="/forum/2014/12/02/MA122Fa14RT3.html">MATH 122 Fall 2014 Review Exam (3|4)</a></li>
						
						
						
						<li><a href="/forum/2014/12/02/MA122Fa14RT4.html">MATH 122 Fall 2014 Review Exam (4|4)</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li class="divider"></li>
						<li class="dropdown-header">Selected Class Material</li>
						
						
						
						
						
						
						
						
						
						
						<li><a href="/teaching/2014/11/08/past-classes.html">Past Sections of Undergraduate Calculus</a></li>
						
						
						
						<li><a href="/teaching/2014/11/08/Mathematical-Imaging.html">Mathematical Imaging</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/teaching/2010/10/27/an-introduction-to-algebraic-topology.html">An Introduction to Algebraic Topology</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/teaching/2010/09/24/distributions.html">Introduction to the Theory of Distributions</a></li>
						
						
						
						
						
						<li><a href="/teaching/2010/07/08/ma598r.html">MA598R—Summer 2007</a></li>
						
						
						
						
						
						
						
						
					</ul>
				</li> <!-- dropdown -->
			</ul>
		</div><!--/.nav-collapse -->
	</div>
</nav>



	<div class="page-content">
		<div class="wrapper">
			<br />
<br />
<br />
<br />
<div class="container theme-showcase" role="main" style="font-size:16px; font-family: Helvetica; width:750px;">

	<header class="post-header">
		<h1 class="post-title">Interaction with Sage</h1>
		<p class="post-meta">Dec 9, 2010</p>
	</header>

	<article class="post-content">
		<p>The objective of this post is to show a few examples of interaction of <code>sage</code> with <span>\( \LaTeX \)</span> to produce results that, otherwise, would carry extensive writing and computation on the side.   We will base it on the figure from the post <a href="http://blancosilva.github.io/post/2010/11/22/sequence-of-right-triangles.html">Sequence of Right Triangles</a>, where right triangles were constructed by halving one of their angles, placing one of the legs on the hypotenuse of the previous triangle, and point the second leg towards the <span>\( x \)</span>–axis.</p>

<p>In the first example, we show how to get the most of your  skills manipulating strings to produce a <code>sage</code> script that generates a <code>tikz</code> code.  In the second example, we utilize the full power of the graphing capabilities of <code>sage</code> to accomplish a similar result.</p>

<p>The mathematical background is nonetheless the same for both examples: According to the results shown in the relevant post, we need to concern only with the position of the vertices at the end of the hypotenuses: We can think of those as vectors <span>\( v_n \)</span> that can be expressed in polar coordinates by <span>\( \theta=\tfrac{\pi}{2^n}, \rho=2^n \sin\big( \tfrac{\pi}{2^{n+1}} \big). \)</span></p>

<h3 id="interaction-of-sage-with-tikz">Interaction of <code>sage</code> with <code>tikz</code></h3>

<p>We are looking for a string of characters that codes the construction of the triangles in <code>tikz</code> language: A possible quick <code>sage</code> script that would generate such a string holding up to <span>\( n \)</span> triangles in this fashion, could be something like this:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="lineno"> 1</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
<span class="lineno"> 2</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="lineno"> 3</span> <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="lineno"> 4</span> <span class="k">while</span> <span class="p">(</span><span class="n">m</span> <span class="o">&lt;=</span><span class="n">n</span><span class="p">):</span>
<span class="lineno"> 5</span>     <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span>
<span class="lineno"> 6</span>     <span class="n">s</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">^</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="lineno"> 7</span>     <span class="n">h</span> <span class="o">=</span> <span class="mi">2</span><span class="o">^</span><span class="n">m</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">^</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="lineno"> 8</span>     <span class="n">smo</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">^</span><span class="n">m</span>
<span class="lineno"> 9</span>     <span class="n">hmo</span> <span class="o">=</span> <span class="mi">2</span><span class="o">^</span><span class="p">(</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">^</span><span class="n">m</span><span class="p">)</span>
<span class="lineno">10</span>     <span class="n">output</span> <span class="o">+=</span> <span class="s">r&quot;\draw (0cm,0cm)--(</span><span class="si">%f</span><span class="s"> r:</span><span class="si">%f</span><span class="s">cm)--(</span><span class="si">%f</span><span class="s"> r:</span><span class="si">%f</span><span class="s">cm)--cycle;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">smo</span><span class="p">,</span><span class="n">hmo</span><span class="p">)</span></code></pre></div>

<p>Note that, since I chose a <code>while</code> environment, I initialize the counter <code>m=1</code> outside, an empty string <code>output</code> and for this particular example, chose five steps (<code>n=5</code>).  The following four variable declarations simply compute the value of angle (<code>s, smo</code>) and length (<code>h, hmo</code>) of the vectors <span>\( v_m \)</span> and <span>\( v_{m-1} \)</span> respectively, for values of <code>m</code> from 2 to 5.  Finally, on each step I append to <code>output</code> the corresponding <code>tikz</code> code that produces the desired triangle.</p>

<p>To insert this code in a <span>\( \LaTeX \)</span> document, all we have to do is wrap it in a <code>sagesilent</code> environment (or <code>sageblock</code> if you want it displayed), and call <code>\sagestr{output}</code> inside of a <code>tikzpicture</code> environment.  Something like this:</p>

<div class="highlight"><pre><code class="language-latex" data-lang="latex"><span class="lineno"> 1</span> <span class="k">\begin</span><span class="nb">{</span>sagesilent<span class="nb">}</span>
<span class="lineno"> 2</span> m=1
<span class="lineno"> 3</span> n=5
<span class="lineno"> 4</span> output=&quot;&quot;
<span class="lineno"> 5</span> while (m &lt;=n):
<span class="lineno"> 6</span>     m=m+1
<span class="lineno"> 7</span>     s=pi/2<span class="nb">^</span>(m+1)
<span class="lineno"> 8</span>     h=2<span class="nb">^</span>m*sin(pi/2<span class="nb">^</span>(m+1))
<span class="lineno"> 9</span>     smo=pi/2<span class="nb">^</span>m
<span class="lineno">10</span>     hmo=2<span class="nb">^</span>(m-1)*sin(pi/2<span class="nb">^</span>m)
<span class="lineno">11</span>     output+=r&quot;<span class="k">\draw</span> (0cm,0cm)--(<span class="c">%f r:%fcm)--(%f r:%fcm)--cycle;&quot;%(s,h,smo,hmo)</span>
<span class="lineno">12</span> <span class="k">\end</span><span class="nb">{</span>sagesilent<span class="nb">}</span>
<span class="lineno">13</span> 
<span class="lineno">14</span> <span class="k">\begin</span><span class="nb">{</span>center<span class="nb">}</span>
<span class="lineno">15</span> <span class="k">\begin</span><span class="nb">{</span>tikzpicture<span class="nb">}</span>[scale=2]
<span class="lineno">16</span> <span class="k">\draw</span><span class="na">[domain=0.001:3.141,smooth,variable=\t,very thick,blue]</span> <span class="c">%</span>
<span class="lineno">17</span>       plot (<span class="nb">{</span><span class="k">\t</span> r<span class="nb">}</span>:1.570796*<span class="nb">{</span>sin(<span class="k">\t</span> r)<span class="nb">}</span>/<span class="k">\t</span>);
<span class="lineno">18</span> <span class="k">\draw</span><span class="na">[ultra thick,-&gt;]</span> (-0.5cm,0cm) -- (2cm,0cm);
<span class="lineno">19</span> <span class="k">\draw</span><span class="na">[ultra thick,-&gt;]</span> (0cm,-0.5cm) -- (0cm,1.5cm);
<span class="lineno">20</span> <span class="k">\draw</span> (0,0) -- (1cm,1cm) -- (0cm,1cm) -- cycle;
<span class="lineno">21</span> <span class="k">\sagestr</span><span class="nb">{</span>output<span class="nb">}</span>
<span class="lineno">22</span> <span class="k">\end</span><span class="nb">{</span>tikzpicture<span class="nb">}</span></code></pre></div>

<p style="text-align:center;"><img src="https://i0.wp.com/farm6.static.flickr.com/5041/5246735458_d7e745531c_o_d.jpg" alt="" width="60%" /></p>

<p>To make style changes, like adding your own color scheme, filling the triangles with texture, or labeling each vertex, all you need to modify in the code is the <code>tikz</code> bit in the declaration of <code>output+=[...]</code>.  In order to produce a different number of triangles, simply change the declaration <code>n=5</code> to any other value.</p>

<h3 id="making-the-most-of-the-graphing-capabilities-of-sage">Making the most of the graphing capabilities of <code>sage</code></h3>

<p>It is a no-brainer: we have so much more control over the technical details from within <code>sage</code>, that we can leave the task of rendering and computation directly, to focus on the writing alone.  A quick <span>\( \LaTeX \)</span> script that produces a similar result, could look like this:</p>

<div class="highlight"><pre><code class="language-latex" data-lang="latex"><span class="k">\begin</span><span class="nb">{</span>sagesilent<span class="nb">}</span>
t=polar<span class="nb">_</span>plot(pi/2*sin(x)/x,(x,0,pi),color=&quot;blue&quot;)
for m in range(6):
    s=pi/2<span class="nb">^</span>(m+1)
    h=2<span class="nb">^</span>m*sin(pi/2<span class="nb">^</span>(m+1))
    smo=pi/2<span class="nb">^</span>m
    hmo=2<span class="nb">^</span>(m-1)*sin(pi/2<span class="nb">^</span>m)
    v1=[h*cos(s),h*sin(s)]
    v2=[hmo*cos(smo),hmo*sin(smo)]
    t+=polygon2d([[0,0],v1,v2],rgbcolor=(m/6,0,0))
<span class="k">\end</span><span class="nb">{</span>sagesilent<span class="nb">}</span>

<span class="k">\sageplot</span><span class="nb">{</span>t<span class="nb">}</span></code></pre></div>

<p>As before, we place the actual code that constructs the different plots inside of a <code>sagesilent</code> environment.  This code simply creates a polar plot of the required function <span>\( f(\theta) = \tfrac{\sin \theta}{\theta} \)</span> between the angular values of zero and <span>\( \pi \)</span>, and then append to it all the triangles, one at a time, by calling the <code>polygon2d</code> command.  We take the liberty to change the shade of the triangle inside.  That is all.  Once the code is finished, we simply call the resulting plot (that was stored in the variable <code>t</code>) with the command <code>\sageplot</code>.  Easy, right?</p>

<p style="text-align:center;"><img src="https://i0.wp.com/farm6.static.flickr.com/5084/5247220578_248e4aab0d_b_d.jpg" alt="" width="60%" /></p>

	</article>

	
	<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'blancosilva'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

	
</div>


<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

		</div>
	</div>

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56262970-1', 'auto');
  ga('send', 'pageview');

</script>
	<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10117038; 
var sc_invisible=1; 
var sc_security="1fd852f3"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counters" href="http://statcounter.com/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/10117038/0/1fd852f3/1/"
alt="free hit counters"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
</body>
</html>
