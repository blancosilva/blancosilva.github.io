<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width initial-scale=1">
	<meta name="description" content="Useless math is useful math. It can be used to generate more useless math.
">
	<meta name="author" content="">

	<title>Interaction with Sage</title>

	<!-- Bootstrap core CSS -->
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<!-- Bootstrap theme -->
	<link href="/css/bootstrap-theme.min.css" rel="stylesheet">

	<!-- Custom styles for this template -->
	<link href="/css/blog.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/pygments.css">


	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body role="document">

	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">Francisco Blanco-Silva</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				
				
				<li><a class="page-link" href="/about/">About me</a></li>
				
				
				
				<li><a class="page-link" href="/books/">Books</a></li>
				
				
				
				
				
				
				
				
				
				<li><a class="page-link" href="/media.html">In the media</a></li>
				
				
				
				<li><a class="page-link" href="/presentations.html">Presentations</a></li>
				
				
				
				<li><a class="page-link" href="/resume.html">Résumé</a></li>
				
				
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">Teaching <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li class="dropdown-header">Current | Most recent classes</li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2014/08/19/ma141-fall-2014.html">MA141—Fall 2014</a></li>
						
						
						
						<li><a href="/course/2014/08/18/math-122-fall-2014.html">MA122—Fall 2014</a></li>
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2014/01/11/ma-241-spring-2014.html">MA241—Spring 2014</a></li>
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2013/08/22/ma242-fall-2013.html">MA242—Fall 2013</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2012/06/26/ma142-summer-ii-2012.html">MA142—Summer II 2012</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li class="divider"></li>
						<li class="dropdown-header">Selected Class Material</li>
						
						
						<li><a href="/teaching/2014/11/08/past-classes.html">Past Sections of Undergraduate Calculus</a></li>
						
						
						
						<li><a href="/teaching/2014/11/08/Mathematical-Imaging.html">Mathematical Imaging</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/teaching/2010/10/27/an-introduction-to-algebraic-topology.html">An Introduction to Algebraic Topology</a></li>
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/teaching/2010/07/08/ma598r.html">MA598R—Summer 2007</a></li>
						
						
						
						
						
						
						
						
<!-- 						<li>Introduction to the Theory of Distributions</li>
						<li>The Basic Practice of Statistics</li> -->
					</ul>
				</li>
			</ul>
		</div><!--/.nav-collapse -->
	</div>
</nav>



	<div class="page-content">
		<div class="wrapper">
			<br />
<br />
<br />
<br />

<div class="container theme-showcase" role="main" style="font-size: 16px; base-line-height: 1.5; font-family: Helvetica, Arial, sans-serif; spacing-unit: 30px; line-height: 20px; width:750px; text-align:justify;">

	<header class="post-header">
		<h1 class="post-title">Interaction with Sage</h1>
	</header>

	<article class="post-content">
		<p style="text-align:justify;font-family:modern;font-size:12pt;">The objective of this post is to show a few examples of interaction of <tt>sage</tt> with $latex \LaTeX$ to produce results that, otherwise, would carry extensive writing and computation on the side.   We will base it on the figure from the post <a href="http://blancosilva.wordpress.com/puzzles/sequence-of-right-triangles/">Sequence of Right Triangles</a>, where right triangles were constructed by halving one of their angles, placing one of the legs on the hypotenuse of the previous triangle, and point the second leg towards the $latex x$–axis.</p>
<p style="text-align:justify;font-family:modern;font-size:12pt;">In the first example, we show how to get the most of your  skills manipulating strings to produce a <tt>sage</tt> script that generates a <tt>tikz</tt> code.  In the second example, we utilize the full power of the graphing capabilities of <tt>sage</tt> to accomplish a similar result.</p>
<p style="text-align:justify;font-family:modern;font-size:12pt;">The mathematical background is nonetheless the same for both examples: According to the results shown in the relevant post, we need to concern only with the position of the vertices at the end of the hypotenuses: We can think of those as vectors $latex v_n$ that can be expressed in polar coordinates by $latex \theta=\tfrac{\pi}{2^n}, \rho=2^n \sin\big( \tfrac{\pi}{2^{n+1}} \big).$</p>
<h3 style="font-family:modern;">Interaction of <tt>sage</tt> with <tt>tikz</tt></h3>
<p style="text-align:justify;font-family:modern;font-size:12pt;">We are looking for a string of characters that codes the construction of the triangles in <tt>tikz</tt> language: A possible quick <tt>sage</tt>script that would generate such a string holding up to $latex n$ triangles in this fashion, could be something like this:</p>
<p>[source language="python"]<br />
m=1<br />
n=5<br />
output=&quot;&quot;<br />
while (m&amp;lt;=n):<br />
    m=m+1<br />
    s=pi/2^(m+1)<br />
    h=2^m*sin(pi/2^(m+1))<br />
    smo=pi/2^m<br />
    hmo=2^(m-1)*sin(pi/2^m)<br />
    output+=r&quot;\draw (0cm,0cm)--(%f r:%fcm)--(%f r:%fcm)--cycle;&quot;%(s,h,smo,hmo)[/source]</p>
<p style="text-align:justify;font-family:modern;font-size:12pt;">Note that, since I chose a <tt>while</tt> environment, I initialize the counter <tt>m=1</tt> outside, an empty string <tt>output</tt> and for this particular example, chose five steps (<tt>n=5</tt>).  The following four variable declarations simply compute the value of angle (<tt>s, smo</tt>) and length (<tt>h, hmo</tt>) of the vectors $latex v_m$ and $latex v_{m-1}$ respectively, for values of <tt>m</tt> from 2 to 5.  Finally, on each step I append to <tt>output</tt> the corresponding <tt>tikz</tt> code that produces the desired triangle.</p>
<p style="text-align:justify;font-family:modern;font-size:12pt;">To insert this code in a $latex \LaTeX$ document, all we have to do is wrap it in a <tt>sagesilent</tt> environment (or <tt>sageblock</tt> if you want it displayed), and call <tt>\sagestr{output}</tt> inside of a <tt>tikzpicture</tt> environment.  Something like this:</p>
<p>[source language="latex"]<br />
\begin{sagesilent}<br />
m=1<br />
n=5<br />
output=&quot;&quot;<br />
while (m&amp;lt;=n):<br />
    m=m+1<br />
    s=pi/2^(m+1)<br />
    h=2^m*sin(pi/2^(m+1))<br />
    smo=pi/2^m<br />
    hmo=2^(m-1)*sin(pi/2^m)<br />
    output+=r&quot;\draw (0cm,0cm)--(%f r:%fcm)--(%f r:%fcm)--cycle;&quot;%(s,h,smo,hmo)<br />
\end{sagesilent}</p>
<p>\begin{center}<br />
\begin{tikzpicture}[scale=2]<br />
\draw[domain=0.001:3.141,smooth,variable=\t,very thick,blue] %<br />
      plot ({\t r}:1.570796*{sin(\t r)}/\t);<br />
\draw[ultra thick,-&amp;gt;] (-0.5cm,0cm) -- (2cm,0cm);<br />
\draw[ultra thick,-&amp;gt;] (0cm,-0.5cm) -- (0cm,1.5cm);<br />
\draw (0,0) -- (1cm,1cm) -- (0cm,1cm) -- cycle;<br />
\sagestr{output}<br />
\end{tikzpicture}[/source]</p>
<p style="text-align:center;"><img src="assets/5246735458_d7e745531c_o_d.jpg" alt="" width="60%" /></p>
<p style="text-align:justify;font-family:modern;font-size:12pt;">To make style changes, like adding your own color scheme, filling the triangles with texture, or labeling each vertex, all you need to modify in the code is the <tt>tikz</tt> bit in the declaration of <tt>output+=[...]</tt>.  In order to produce a different number of triangles, simply change the declaration <tt>n=5</tt> to any other value.</p>
<h3 style="font-family:modern;">Making the most of the graphing capabilities of <tt>sage</tt></h3>
<p style="text-align:justify;font-family:modern;font-size:12pt;">It is a no-brainer: we have so much more control over the technical details from within <tt>sage</tt>, that we can leave the task of rendering and computation directly, to focus on the writing alone.  A quick $latex \LaTeX$ script that produces a similar result, could look like this:</p>
<p>[source language="latex"]\begin{sagesilent}<br />
t=polar_plot(pi/2*sin(x)/x,(x,0,pi),color=&quot;blue&quot;)<br />
for m in range(6):<br />
    s=pi/2^(m+1)<br />
    h=2^m*sin(pi/2^(m+1))<br />
    smo=pi/2^m<br />
    hmo=2^(m-1)*sin(pi/2^m)<br />
    v1=[h*cos(s),h*sin(s)]<br />
    v2=[hmo*cos(smo),hmo*sin(smo)]<br />
    t+=polygon2d([[0,0],v1,v2],rgbcolor=(m/6,0,0))<br />
\end{sagesilent}</p>
<p>\sageplot{t}[/source]</p>
<p style="text-align:justify;font-family:modern;font-size:12pt;">As before, we place the actual code that constructs the different plots inside of a <tt>sagesilent</tt> environment.  This code simply creates a polar plot of the required function $latex f(\theta) = \tfrac{\sin \theta}{\theta}$ between the angular values of zero and $latex \pi$, and then append to it all the triangles, one at a time, by calling the <tt>polygon2d</tt> command.  We take the liberty to change the shade of the triangle inside.  That is all.  Once the code is finished, we simply call the resulting plot (that was stored in the variable <tt>t</tt>) with the command <tt>\sageplot</tt>.  Easy, right?</p>
<p style="text-align:center;"><img src="assets/5247220578_248e4aab0d_b_d.jpg" alt="" width="60%" /></p>
<h3 style="font-family:modern;font-size:12pt;">References</h3>
<p style="text-align:center;"><a href="http://www.amazon.com/gp/product/0321514432/ref=as_li_tf_il?ie=UTF8&amp;tag=blancosilva-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399377&amp;creativeASIN=0321514432"><img border="0" src="assets/q?_encoding=UTF8&amp;Format=_SL160_&amp;ASIN=0321514432&amp;MarketPlace=US&amp;ID=AsinImage&amp;WS=1&amp;tag=blancosilva-20&amp;ServiceVersion=20070822" /></a><img src="assets/ir?t=blancosilva-20&amp;l=as2&amp;o=1&amp;a=0321514432&amp;camp=217145&amp;creative=399377" width="1" height="1" border="0" alt="" style="border:none!important;margin:0!important;" /><br /><a href="http://www.amazon.com/gp/product/0321514432/ref=as_li_tf_tl?ie=UTF8&amp;tag=blancosilva-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399377&amp;creativeASIN=0321514432">The LaTeX Companions Third Revised Boxed Set: A Complete Guide and Reference for Preparing,  Illustrating and Publishing Technical Documents (2nd Edition)</a><img src="assets/ir?t=blancosilva-20&amp;l=as2&amp;o=1&amp;a=0321514432&amp;camp=217145&amp;creative=399377" width="1" height="1" border="0" alt="" style="border:none!important;margin:0!important;" /> (See all <a href="http://www.amazon.com/Technical-Writing-Reference-Books/b/ref=as_li_tf_tl?ie=UTF8&amp;tag=blancosilva-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399385&amp;creativeASIN=0321514432&amp;ie=UTF8&amp;node=170945">Technical Writing References</a>)<img src="assets/ir?t=blancosilva-20&amp;l=as2&amp;o=1&amp;a=0321514432&amp;camp=217145&amp;creative=399385" width="1" height="1" border="0" alt="" style="border:none!important;margin:0!important;" /></p>

	</article>

	

</div>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

		</div>
	</div>

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56262970-1', 'auto');
  ga('send', 'pageview');

</script>
	<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10117038; 
var sc_invisible=1; 
var sc_security="1fd852f3"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counters" href="http://statcounter.com/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/10117038/0/1fd852f3/1/"
alt="free hit counters"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

	    <!-- Bootstrap core JavaScript
	    ================================================== -->
	    <!-- Placed at the end of the document so the pages load faster -->
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	    <script src="/js/bootstrap.min.js"></script>
	    <script src="/assets/js/docs.min.js"></script>
	    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	    <script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
	    <script type="text/javascript">
	    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'eseprimo'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    	var s = document.createElement('script'); s.async = true;
    	s.type = 'text/javascript';
    	s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    	(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    
</body>
</html>
