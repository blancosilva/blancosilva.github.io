<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width initial-scale=1">
	<meta name="description" content="Useless math is useful math. It can be used to generate more useless math.
">
	<meta name="author" content="">

	<title>Binary Images</title>

	<!-- Bootstrap core CSS -->
	<link href="/css/bootstrap.css" rel="stylesheet">
	<!-- Bootstrap theme -->
	<link href="/css/bootstrap-theme.css" rel="stylesheet">

	<!-- Custom styles for this template -->
	<link href="/css/blog.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/pygments.css">
</head>

<body role="document">

	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<a class="navbar-brand" href="#">
				<img alt="Brand" src="https://farm6.staticflickr.com/5131/5393012839_cf3ccae561_o_d.png" style="width:25px;">
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
			</button>
			<a class="navbar-brand" href="/">Francisco Blanco-Silva</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				
				
				<li><a class="page-link" href="/about/">About me</a></li>
				
				
				
				<li><a class="page-link" href="/books/">Books</a></li>
				
				
				
				
				
				
				
				
				
				
				
				<li><a class="page-link" href="/presentations.html">Presentations</a></li>
				
				
				
				
				
				
			</ul> <!-- nav navbar-nav -->
			<ul class="nav navbar-nav navbar-right">
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">Teaching <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li class="dropdown-header">Current | Most recent classes</li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2014/08/19/ma141-fall-2014.html">MA141—Fall 2014</a></li>
						
						
						
						<li><a href="/course/2014/08/18/math-122-fall-2014.html">MA122—Fall 2014</a></li>
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2014/01/11/ma-241-spring-2014.html">MA241—Spring 2014</a></li>
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2013/08/22/ma242-fall-2013.html">MA242—Fall 2013</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/course/2012/06/26/ma142-summer-ii-2012.html">MA142—Summer II 2012</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li class="divider"></li>
						<li class="dropdown-header">Selected Class Material</li>
						
						
						<li><a href="/teaching/2014/11/08/past-classes.html">Past Sections of Undergraduate Calculus</a></li>
						
						
						
						<li><a href="/teaching/2014/11/08/Mathematical-Imaging.html">Mathematical Imaging</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/teaching/2010/10/27/an-introduction-to-algebraic-topology.html">An Introduction to Algebraic Topology</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/teaching/2010/09/24/distributions.html">Introduction to the Theory of Distributions</a></li>
						
						
						
						
						
						<li><a href="/teaching/2010/07/08/ma598r.html">MA598R—Summer 2007</a></li>
						
						
						
						
						
						
						
						
					</ul>
				</li> <!-- dropdown -->
			</ul>
		</div><!--/.nav-collapse -->
	</div>
</nav>



	<div class="page-content">
		<div class="wrapper">
			<br />
<br />
<br />
<br />

<div class="container theme-showcase" role="main" style="font-size: 16px; base-line-height: 1.5; font-family: Helvetica, Arial, sans-serif; spacing-unit: 30px; line-height: 20px; width:750px; text-align:justify;">

	
<!-- 	<header class="post-header">
		<h1 class="post-title">Binary Images</h1>
	</header> -->

	<article class="post-content">
		<p>We can think of a binary image as a True-False map of the form <span>\( f\colon \{ 1, \dotsc, N \} \times \{  1, \dotsc, M \} \to \{  0,1 \}. \)</span>  These are the simplest images one can imagine, and most of the related image-processing algorithms are trivial to code.  For example, take the case of <strong>feature recognition</strong>:</p>

<p>Given the binary image <code>Img</code> below (left) representing a simple text with a few extra features, and any letter of the alphabet, we are able to retrieve all the occurrences of said letter by tracking all the global maxima of a simple correlation (of <code>Img</code> with a suitable image of the required letter as kernel).  We have chosen the letter “e” in the following example:</p>

<table style="width:75%; border:0px; margin-left:auto; margin-right:auto;">
<tr>
<td style="border:0;width:75%;text-align:center;vertical-align:middle;">
<a href="http://www.flickr.com/photos/eseprimo/5530106392/" title="texto by eseprimo, on Flickr"><img src="http://farm6.static.flickr.com/5252/5530106392_e3b8670465.jpg" width="100%" alt="texto" /></a>
</td>
<td style="border:0;width:25%;text-align:center;vertical-align:middle;">
<a href="http://www.flickr.com/photos/eseprimo/5530101754/" title="E by eseprimo, on Flickr"><img src="http://farm6.static.flickr.com/5211/5530101754_902994d574.jpg" width="100%" alt="E" /></a>
</td>
</tr>
</table>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="lineno">1</span> <span class="n">E</span><span class="o">=</span><span class="n">Img</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span><span class="mi">21</span><span class="p">:</span><span class="mi">26</span><span class="p">]</span>
<span class="lineno">2</span> <span class="n">Correlation</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">ndimage</span><span class="o">.</span><span class="n">correlate</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span><span class="n">E</span><span class="p">)</span>
<span class="lineno">3</span> <span class="n">matrix_plot</span><span class="p">(</span><span class="n">Correlation</span> <span class="o">==</span> <span class="n">Correlation</span><span class="o">.</span><span class="n">max</span><span class="p">())</span></code></pre></div>

<p style="text-align:center;"><a href="http://www.flickr.com/photos/eseprimo/5529513439/" title="Mcorrelate by eseprimo, on Flickr"><img src="http://farm6.static.flickr.com/5175/5529513439_9972e38b35.jpg" width="500" height="175" alt="Mcorrelate" /></a></p>

<p>A very natural question to ask is, what is a good approximation by binary images to a given gray-scale image <span>\( f\colon \{ 1,\dotsc,N \} \times \{  1, \dotsc, M \} \to \{ 0, \dotsc, 255 \}? \)</span>  Is there any advantage to working with this binary image instead of using the original?  Maybe not in general, but for a certain set of simple-enough images, and certain set of image processing procedures, it could turn extremely useful.  Let us start by answering first the question of turning grey-scale images into binary:</p>

<h3 id="the-half-tone-algorithm">The half-tone algorithm</h3>

<table style="width:75%; border:0px; margin-left:auto; margin-right:auto;">
<tr>
<td style="border:0;width:50%;text-align:center;vertical-align:middle;">
<a href="http://www.flickr.com/photos/eseprimo/5532514990/" title="originalLena by eseprimo, on Flickr"><img src="http://farm6.static.flickr.com/5298/5532514990_570846bd43.jpg" width="100%" alt="originalLena" /></a>
</td>
<td style="border:0;width:50%;text-align:center;vertical-align:middle;">
<a href="http://www.flickr.com/photos/eseprimo/5531928841/" title="halftonedLena by eseprimo, on Flickr"><img src="http://farm6.static.flickr.com/5218/5531928841_3ac938345f.jpg" width="100%" alt="halftonedLena" /></a></td>
</tr>
</table>

<p>The code below shows an algorithm that performs a simulation of continuous tone images through the use of white and black dots varying in spacing (the closer to each other, the darker; the farther apart, the lighter).  It is a good exercise to try and interpret what this code does by yourself, and do a write-up.  I helped the process by making the variable names self-explanatory, and dropping small hints.  Give it a go!</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="lineno"> 1</span> <span class="n">Img</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">lena</span><span class="p">()</span>
<span class="lineno"> 2</span> <span class="n">GlobalError</span>  <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="lineno"> 3</span> <span class="n">ErrorPropagation</span>  <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="lineno"> 4</span> <span class="n">HalftonedImg</span>   <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span> <span class="n">ColorDistributionKernel</span>   <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span><span class="o">/</span><span class="mf">16.0</span>
<span class="lineno"> 7</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">128</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="lineno">10</span>     <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="lineno">11</span> 	<span class="c"># We perform some sort of convolution (between what objects?).</span>
<span class="lineno">12</span> 	<span class="c"># and store the result in ErrorPropagation</span>
<span class="lineno">13</span>         <span class="n">sum_p</span><span class="o">=</span><span class="mf">0.0</span>
<span class="lineno">14</span>         <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ColorDistributionKernel</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="lineno">15</span>             <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ColorDistributionKernel</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="lineno">16</span>                 <span class="n">xx</span> <span class="o">=</span> <span class="n">minimum</span><span class="p">(</span><span class="n">maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">x</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="lineno">17</span>                 <span class="n">yy</span> <span class="o">=</span> <span class="n">minimum</span><span class="p">(</span><span class="n">maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="o">-</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="lineno">18</span>                 <span class="n">sum_p</span> <span class="o">+=</span> <span class="n">ColorDistributionKernel</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="n">GlobalError</span><span class="p">[</span><span class="n">xx</span><span class="p">,</span><span class="n">yy</span><span class="p">]</span>
<span class="lineno">19</span>         <span class="n">ErrorPropagation</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">sum_p</span>
<span class="lineno">20</span> 	<span class="c"># How do ErrorPropagation and GlobalError relate to each other?</span>
<span class="lineno">21</span> 	<span class="c"># How do we use this to populate the halftoned image?</span>
<span class="lineno">22</span> 	<span class="c"># How did we choose the threshold?</span>
<span class="lineno">23</span>         <span class="n">t</span><span class="o">=</span><span class="n">Img</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span><span class="o">+</span><span class="n">ErrorPropagation</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>
<span class="lineno">24</span>         <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">:</span>
<span class="lineno">25</span>             <span class="n">GlobalError</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">t</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">threshold</span>
<span class="lineno">26</span>             <span class="n">HalftonedImg</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
<span class="lineno">27</span>         <span class="k">else</span><span class="p">:</span>
<span class="lineno">28</span>             <span class="n">GlobalError</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">t</span></code></pre></div>


	</article>

	
	<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'blancosilva'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

	

</div>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

		</div>
	</div>

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56262970-1', 'auto');
  ga('send', 'pageview');

</script>
	<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10117038; 
var sc_invisible=1; 
var sc_security="1fd852f3"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counters" href="http://statcounter.com/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/10117038/0/1fd852f3/1/"
alt="free hit counters"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
</body>
</html>
